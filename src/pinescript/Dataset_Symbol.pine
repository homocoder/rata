//@version=5
indicator("Dataset_Symbol", overlay=false)

/// INPUTS
// Define our inputs
//SYMBOL = input.string(defval="AUDUSD", title="Select Main Source Symbol", options=["AUDUSD", "AUDCNH", "AUDJPY", "AUDGBP", "AUDEUR", "AUDCAD", "AUDCHF", "AUDNZD", "USDEUR", "USDCNH", "USDJPY", "USDGBP", "USDAUD", "USDCAD", "USDCHF", "USDNZD", "EURUSD", "EURCNH", "EURJPY", "EURGBP", "EURAUD", "EURCAD", "EURCHF", "EURNZD", "SPX500", "EURO50", "AUS200", "XAUUSD", "WTIOIL", "USDIDX", "EURIDX", "AUDIDX"])

// The basket of symbols
USDEUR = "(1 / (FX:EURUSD))" // repeated
USDCNH = "(1 * (FX:USDCNH))"
USDJPY = "(1 * (FX:USDJPY))"
USDGBP = "(1 / (FX:GBPUSD))"
USDAUD = "(1 / (FX:AUDUSD))" // repeated
USDCAD = "(1 * (FX:USDCAD))"
USDCHF = "(1 * (FX:USDCHF))"
USDNZD = "(1 / (FX:NZDUSD))"

EURUSD = "(1 * (FX:EURUSD))"
EURCNH = "(1 * (CAPITALCOM:EURCNH))"
EURJPY = "(1 * (FX:EURJPY))"
EURGBP = "(1 * (FX:EURGBP))"
EURAUD = "(1 * (FX:EURAUD))" // repeated
EURCAD = "(1 * (FX:EURCAD))"
EURCHF = "(1 * (FX:EURCHF))"
EURNZD = "(1 * (FX:EURNZD))"

AUDUSD = "(1 * (FX:AUDUSD))"
AUDCNH = "(1 * (CAPITALCOM:AUDCNH))"
AUDJPY = "(1 * (FX:AUDJPY))"
AUDGBP = "(1 / (FX:GBPAUD))"
AUDEUR = "(1 / (FX:EURAUD))" 
AUDCAD = "(1 * (FX:AUDCAD))"
AUDCHF = "(1 * (FX:AUDCHF))"
AUDNZD = "(1 * (FX:AUDNZD))"

SPX500 = "FX:SPX500"
EURO50 = "FX:EUSTX50"
AUS200 = "FX:AUS200"
XAUUSD = "FX:XAUUSD"
WTIOIL = "FX:USOIL"

USDIDX = "(" + USDEUR + " + " + USDCNH + " + " + USDJPY + " + " + USDGBP + " + " + USDAUD + " + " + USDCAD + " + " + USDCHF + " + " + USDNZD +  ") / 8"
EURIDX = "(" + EURUSD + " + " + EURCNH + " + " + EURJPY + " + " + EURGBP + " + " + EURAUD + " + " + EURCAD + " + " + EURCHF + " + " + EURNZD +  ") / 8"
AUDIDX = "(" + AUDUSD + " + " + AUDCNH + " + " + AUDJPY + " + " + AUDGBP + " + " + AUDEUR + " + " + AUDCAD + " + " + AUDCHF + " + " + AUDNZD +  ") / 8"

// Get the closing prices of all assets
USDEUR_close = request.security(AUDUSD, timeframe.period, close)
USDCNH_close = request.security(USDCNH, timeframe.period, close)
USDJPY_close = request.security(USDJPY, timeframe.period, close)
USDGBP_close = request.security(USDGBP, timeframe.period, close)
USDAUD_close = request.security(USDAUD, timeframe.period, close)
USDCAD_close = request.security(USDCAD, timeframe.period, close)
USDCHF_close = request.security(USDCHF, timeframe.period, close)
USDNZD_close = request.security(USDNZD, timeframe.period, close)

EURUSD_close = request.security(EURUSD, timeframe.period, close)
EURCNH_close = request.security(EURCNH, timeframe.period, close)
EURJPY_close = request.security(EURJPY, timeframe.period, close)
EURGBP_close = request.security(EURGBP, timeframe.period, close)
EURAUD_close = request.security(EURAUD, timeframe.period, close)
EURCAD_close = request.security(EURCAD, timeframe.period, close)
EURCHF_close = request.security(EURCHF, timeframe.period, close)
EURNZD_close = request.security(EURNZD, timeframe.period, close)

AUDUSD_close = request.security(AUDUSD, timeframe.period, close)
AUDCNH_close = request.security(AUDCNH, timeframe.period, close)
AUDJPY_close = request.security(AUDJPY, timeframe.period, close)
AUDGBP_close = request.security(AUDGBP, timeframe.period, close)
AUDEUR_close = request.security(AUDEUR, timeframe.period, close)
AUDCAD_close = request.security(AUDCAD, timeframe.period, close)
AUDCHF_close = request.security(AUDCHF, timeframe.period, close)
AUDNZD_close = request.security(AUDNZD, timeframe.period, close)

SPX500_close = request.security(SPX500, timeframe.period, close)
EURO50_close = request.security(EURO50, timeframe.period, close)
AUS200_close = request.security(AUS200, timeframe.period, close)
XAUUSD_close = request.security(XAUUSD, timeframe.period, close)
WTIOIL_close = request.security(WTIOIL, timeframe.period, close)

USDIDX_close = request.security(USDIDX, timeframe.period, close)
EURIDX_close = request.security(EURIDX, timeframe.period, close)
AUDIDX_close = request.security(AUDIDX, timeframe.period, close)

// Plot all closing prices

plot(USDEUR_close, title='USDEUR', color=color.green)
plot(USDCNH_close, title='USDCNH', color=color.green)
plot(USDJPY_close, title='USDJPY', color=color.green)
plot(USDGBP_close, title='USDGBP', color=color.green)
plot(USDAUD_close, title='USDAUD', color=color.green)
plot(USDCAD_close, title='USDCAD', color=color.green)
plot(USDCHF_close, title='USDCHF', color=color.green)
plot(USDNZD_close, title='USDNZD', color=color.green)

plot(EURUSD_close, title='EURUSD', color=color.blue)
plot(EURCNH_close, title='EURCNH', color=color.blue)
plot(EURJPY_close, title='EURJPY', color=color.blue)
plot(EURGBP_close, title='EURGBP', color=color.blue)
plot(EURAUD_close, title='EURAUD', color=color.blue)
plot(EURCAD_close, title='EURCAD', color=color.blue)
plot(EURCHF_close, title='EURCHF', color=color.blue)
plot(EURNZD_close, title='EURNZD', color=color.blue)

plot(AUDUSD_close, title='AUDUSD', color=color.white)
plot(AUDCNH_close, title='AUDCNH', color=color.white)
plot(AUDJPY_close, title='AUDJPY', color=color.white)
plot(AUDGBP_close, title='AUDGBP', color=color.white)
plot(AUDEUR_close, title='AUDEUR', color=color.white)
plot(AUDCAD_close, title='AUDCAD', color=color.white)
plot(AUDCHF_close, title='AUDCHF', color=color.white)
plot(AUDNZD_close, title='AUDNZD', color=color.white)

plot(SPX500_close, title='SPX500', color=color.gray)
plot(EURO50_close, title='EURO50', color=color.gray)
plot(AUS200_close, title='AUS200', color=color.gray)
plot(XAUUSD_close, title='XAUUSD', color=color.gray)
plot(WTIOIL_close, title='WTIOIL', color=color.gray)

plot(USDIDX_close, title='USDIDX', color=color.fuchsia)
plot(EURIDX_close, title='EURIDX', color=color.fuchsia)
plot(AUDIDX_close, title='AUDIDX', color=color.fuchsia)